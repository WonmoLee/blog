---
title: "[Linux] i-node와 링크"
categories:
  - Linux
tags:
  - 리눅스
  - Linux
  - i-node
  - 아이노드
  - 링크
  - 소프트 링크
  - 하드 링크
  - 심볼릭 링크
toc: true
toc_sticky: true
toc_label: "목차"
---

리눅스를 공부하다가 심볼릭 링크라는 단어를 접하게되었다. 여러 자료들을 찾아보니 심볼릭 링크는 리눅스의 i-node개념과 연관성이 있는 것을 알게되었고, 이번 포스팅에서 심볼릭 링크를 포함하는 보다 큰 개념인 링크와 이에 연관성을 가지는 i-node에 대해 정리해보고자 한다.

# i-node
## i-node 개념
리눅스의 링크개념을 이해하려면 i-node를 알아야한다. 리눅스는 파일 시스템을 처리할 때 리눅스 전용 특수한 index를 사용하는데 이것을 i-node라고 한다. i-node는 index-node의 줄임말로, 파일을 빠르게 찾기 위한 노드를 의미하며, 리눅스의 모든 파일에 관한 index정보와 파일정보를 들고 있는 일종의 자료 구조이다.  
때문에 리눅스의 모든 파일 및 디렉토리는 고유한 i-node를 가지고 있으며, 이러한 i-node를 통해 구분이 가능하다.   

즉, i-node는 리눅스에서 파일에 대한 정보(metadata)를 가진, 일종의 데이터라고 이해하면된다.

## i-node 특징
앞전에 i-node는 인덱스 뿐만아니라 파일에 대한 정보(metadata)를 포함하고 있다고 언급하였다. 해당 정보에 대한 목록은 다음과 같다.
- 파일모드(Permission)
- 링크 수
- 소유자명
- 그룹명
- 파일 크기
- 파일 주소
- 마지막 접근 정보
- 마지막 수정 정보
- 아이노드 수정 정보

i-node는 한 파일이 사용하는 모든 블록을 가리키는 포인터들을 포함하는 하나의 블록(데이터 저장 단위)이다. 그래서 i-node는 모든 블록의 주소를 가리키는 포인터들에 대한 정보를 포함하고 있으며, 블록들을 서로 연결하는 역할을 한다.

# 링크
---
Window OS를 사용하다 보면 어떤 파일을 실행할 때, 해당 파일을 직접 실행하는 경우도 있지만 바로가기를 통해 접근하는 경우도 많다.
리눅스 역시 윈도우의 바로가기와 비슷한 기능을 제공하는데, 이를 리눅스 링크 라고 한다.  
리눅스에서 링크는 크게 하드링크와 심볼릭 링크 2가지로 나뉜다. 각각의 내용은 아래에서 살펴보자.

## 하드링크

![하드 링크](/blog/assets/img/posts/20220807/hard-link.png "하드 링크"){: width="100%"}
<div style="color: gray; text-align: center; margin-bottom: 30px;">하드 링크</div> 

하드 링크는 디렉토리 구조에 대한 항목만 파일이 생성되지만 원본 파일의 i-node 위치를 가리킨다.
즉, 하드 링크에는 새로운 i-node 생성이 없다. 하드 링크는 일반적인 복사본과는 엄연히 다르며, 파일 시스템에 있는 데이터를 복사한 것이 아니라 i-node 번호만 복사했기 때문이다. 따라서 진짜 복사했을 때와 달리, 파일 시스템 내의 데이터 자체가 여전히 1개만 존재한다.

하드 링크를 만드는 명령어는 다음과 같다.
```bash
ln [원본 파일] [링크 파일]
```

## 심볼릭 링크(소프트 링크)

![심볼릭 링크](/blog/assets/img/posts/20220807/symbolic-link.png "심볼릭 링크"){: width="100%"}
<div style="color: gray; text-align: center; margin-bottom: 30px;">심볼릭 링크</div> 

심볼릭 링크는 소프트 링크라고도 불리며, 윈도우 시스템에서 제공하는 바로가기 기능과 매우 유사하다. 원본 파일에 대한 정보가 포함되어 있지 않으며, 원본 파일 위치에 대한 포인터만 포함되므로 새로운 i-node를 가진 링크 파일이 생성된다.

심볼릭 링크를 만드는 명령어는 다음과 같다.
```bash
ln –s [원본 파일] [링크 파일]
```

## 하드 링크와 심볼릭 링크의 차이
하드 링크와 심볼릭 링크의 큰 차이는 새로운 i-node 생성 여부이다. 그 차이에 따라 원본 파일을 삭제할 경우 접근 가능 여부도 달라진다. 자세한 차이는 다음과 같다.

![하드 링크와 심볼릭 링크의 차이](/blog/assets/img/posts/20220807/the-difference-between-each-link.png "하드 링크와 심볼릭 링크의 차이"){: width="100%"}
<div style="color: gray; text-align: center; margin-bottom: 30px;">하드 링크와 심볼릭 링크의 차이</div>

## 하드 링크와 심볼릭 링크의 적절한 사용
- 하드 링크
  - 저장공간을 고려할 경우
    >하드 링크 파일은 마치 용량을 점유하고 있는 것처럼 보이지만 진짜로 데이터를 복사한 것이 아니라 이미 존재하는 데이터의 위치만 가리키고 있으며, 별도의 데이터를 저장하지 않기 때문에 용량을 차지하지 않는다. 반면 심볼릭 링크는 자신이 가리키고 있는 파일의 위치를 데이터로서 저장하기 때문에 약간의 용량(보통 4KB)을 차지한다.
  - 성능을 고려할 경우
    >다른 파일을 거치지 않고 직접 디스크 포인터에 액세스하므로 하드 링크로 액세스하면 성능이 좋다.
  - 파일 위치변경을 고려할 경우
    >원본 파일을 같은 파일 시스템의 다른 위치로 옮기면 하드 링크는 계속 작동하지만 소프트 링크는 실패한다.
  - 안정성을 고려할 경우
    >심볼릭 링크보다 하드 링크가 데이터 안전성이 우수하다.
- 심볼릭 링크
  - 파일 시스템에 링크할 경우
  - 디렉토리를 링크할 경우

---

읽어주셔서 감사합니다. 😊

__Reference__  
[[Linux] 리눅스 시스템의 아이노드(inode), 심볼릭 링크(Symbolic Link), 하드 링크(Hard Link)에 대해서. - Tistory](https://i5i5.tistory.com/341)  
[심볼릭 링크란 무엇일까 - Tistory](https://haruhiism.tistory.com/18)  