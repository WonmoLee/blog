---
title: "[Java] 생성자(Constructor)"
description: 
author: Enxec
date: 2023-01-10
categories: [Language, Java]
tags: [java, 자바, Constructor, 생성자]
pin: false
math: true
mermaid: true
image:
  path: /thumbnail/java-logo.png
  lqip: 
  alt: 
---

## 생성자란?
---
생성자는 인스턴스가 생성될 때 호출되는 '인스턴스 초기화 메서드' 이다. 따라서 인스턴스 변수의 초기화 작업에 주로 사용되며, 인스턴스 생성 시에 실행되어야 할 작업을 위해서도 사용된다.

__알아두기__  
인스턴스 초기화란, 인스턴스 변수들을 초기화하는 것을 말한다.

생성자 역시 메서드 처럼 클래스 내에 선언되며, 구조도 메서드와 유사하지만 리턴값이 없다는 점이 다르다. 그렇다고 해서 생성자 앞에 리턴값이 없음을 뜻하는 키워드 void를 사용하지는 않고, 단지 아무것도 적지 않는다. 생성자의 조건은 다음과 같다.

>- 생성자의 이름은 클래스의 이름과 같아야 한다.  
>- 생성자는 리턴 값이 없다.

__알아두기__  
생성자도 메서드이기 때문에 리턴값이 없다면 void를 함께 작성해주어야하는게 옳다고 생각되지만, 모든 생성자는 리턴값이 없으므로 void생략이 가능하다.

## 생성자 정의 방법
---
생성자도 오버로딩이 가능하므로 하나의 클래스에 여러개의 생성자가 존재할 수 있다. 생성자는 다음과 같이 정의한다. 

```java
클래스이름(타입 변수명, 타입 변수명, ...) {
  // 인스턴스 생성 시 수행될 코드
  // 주로 인스턴스 변수의 초기화 코드를 적는다.
}

class Card {
  Card() {  // 매개변수가 없는 생성자
    ...
  }

  Card(String k, int num) { // 매개변수가 있는 생성자.
    ...
  }
  ...
}
```

여기서 알아두어야 할 것은 연산자 new가 인스턴스를 생성하는 것이지 생성자가 인스턴스를 생성하는 것이 아니라는 점이다. 생성자라는 용어 때문에 오해하기 쉬운데, 생성자는 단순히 인스턴스변수들의 초기화에 사용되는 조금 특별한 메서드일 뿐이다. 생성자가 갖는 몇 가지 특징만 제외하면 메서드와 다르지않다.

Card클래스의 인스턴스를 생성하는 코드를 예로 들어, 수행되는 과정을 단계별로 나누어보면 다음과 같다.

```java
Card c = new Card();

// 1. 연산자 new에 의해서 메모리(heap)에 Card클래스의 인스턴스가 생성된다.
// 2. 생성자 Card()가 호출되어 수행된다.
// 3. 연산자 new의 결과로, 생성된 Card인스턴스의 주소가 반환되어 참조변수 c에 저장된다.
```
그렇다. 우리가 지금까지 인스턴스를 생성하기위해 사용해왔던 '클래스이름()'이 바로 생성자였던 것이다. 인스턴스를 생성할 때는 반드시 클래스 내에 정의된 생성자 중의 하나를 선택하여 지정해주어야 한다.

## 기본 생성자
---
자바의 모든 클래스는 반드시 하나 이상의 생성자가 정의되어 있어야 한다. 그러나 지금까지 클래스에 생성자를 정의하지 않고도 인스턴스를 생성할 수 있었던 이유는 컴파일러가 제공하는 '기본 생성자' 덕이였다.

컴파일 할 때, 소스파일(*.java)의 클래스에 생성자가 하나도 정의되지 않은 경우 컴파일러는 자동적으로 아래와 같은 내용의 기본 생성자를 추가하여 컴파일 한다.

```java
클래스이름() { }

Card() { }
```

컴파일러가 자동적으로 추가해주는 기본 생성자는 이와 같이 매개변수도 없고 아무런 내용도 없는 아주 간단한 것이다.

그동안 우리는 인스턴스를 생성할 때 컴파일러가 제공한 기본 생성자를 사용해왔던 것이다. 특별히 인스턴스 초기화 작업이 요고되어지지 않는다면 생성자를 정의하지 않고 컴파일러가 제공하는 기본 생성자를 사용하는 것도 좋다.

__알아두기__  
- 클래스의 '접근 제어자'가 public인 경우에는 기본 생성자로 'public 클래스이름() {}'이 추가된다.
- 기본 생성자가 컴파일러에 의해서 추가되는 경우는 클래스에 정의된 생성자가 존재하지 않을 때 뿐이다.

## 매개변수가 있는 생성자
---
생성자도 메서드처럼 매개변수를 선언하여 호출 시 값을 넘겨받아서 인스턴스의 초기화 작업에 사용할 수 있다. 인스턴스마다 각기 다른 값으로 초기화되어야하는 경우가 많기 땜누에 매개변수를 사용한 초기화는 매우 유용하다.

아래의 코드는 자동차를 클래스로 정의한 것인데, 단순히 color, gearType, door 세 개의 인스턴스변수와 두개의 생성자만을 가지고 이싿.

```java
class Car {
  String color;       // 색상
  String gearType;    // 변속기 종류 - auto(자동), manual(수동)
  int door;           // 문의 개수

  Car() {} // 생성자
  Car(String c, String g, int d) {  // 생성자
    color = c;
    gearType = g;
    door = d;
  }
}
```

Car 인스턴스를 생성할 때, 생성자 Car()를 사용한다면, 인스턴스를 생성한 다음에 인스턴스변수들을 따로 초기화해주어야 하지만, 매개변수가 있는 생성자를 사용한다면 인스턴스를 생성하는 동시에 원하는 값으로 초기화를 할 수 있게 된다.

인스턴스를 생성한 다음에 인스턴스 변수의 값을 변경하는 것보다 매개변수를 갖는 생성자를 사용하는 것이 코드를 보다 간결하고 직관적으로 만든다.

## 생성자에서 다른 생성자 호출하기 - this(), this
---
같은 클래스의 멤버들 간에 서로 호출할 수 있는 것처럼 생성자 간에도 서로 호출이 가능하다. 단, 다음의 두 조건을 만족시켜야 한다.

>- 생성자의 이름으로 클래스이름 대신 this를 사용한다.
>- 한 생성자에서 다른 생성자를 호출할 때는 반드시 첫 줄에서만 호출이 가능하다.

다음의 코드는 생성자를 작성할 때 지켜야하는 두 조건을 모두 만족시키지 못했기 때문에 에러가 발생한다.

```java
Car(String color) {
  door = 5;                 // 첫번째 줄
  Car(color, "auto", 4);    // 에러1. 생성자의 두번째 줄에서 다른 생성자 호출
}                           // 에러2. this(color, "auto", 4); 로 해야함.
```

생성자 내에서 다른 생성자를 호출 할 때는 클래스이름인 'Car'대신 'this'를 사용해야하는데 그러지 않아서 에러이고, 또 다른 에러는 생성자 호출이 첫번째 줄이 아닌 두번째 줄이기 때문에 에러이다.

생성자에서 다른 생성자를 첫 줄에서만 호출이 가능하도록 한 이유는 생성자 내에서 초기화 작업도중에 다른 생성자를 호출하게 되면, 호출된 다른 생성자 내에서도 멤버변수들의 값을 초기화할 것이므로, 다른 생성자를 호출하기 이전의 초기화 작업이 무의미해질 수 있기 때문이다.

올바른 예제코드는 다음과 같다.

```java
class Car {
  String color;       // 색상
  String gearType;    // 변속기 종류 - auto(자동), manual(수동)
  int door;           // 문의 개수

  Car() {
    this("white", "auto", 4);
  }

  Car(String color) {
    this(color, "auto", 4);
  }

  Car(String color, String gearType, int door) {
    this.color = color;
    this.gearType = gearType;
    this.door = door;
  }
}

class CarTest2 {
  public static void main(String[] args) {
    Car c1 = new Car();
    Car c2 = new Car("blue");

    System.out.println("c1의 color=" + c1.color + ", gearType=" + c1.gearType + ", door=" + c1.door);
    System.out.println("c2의 color=" + c2.color + ", gearType=" + c2.gearType + ", door=" + c2.door);
  }
}
```

추가적인 설명은 생략하고 this와 this()에 대한 요약은 다음과 같다.
>- this : 인스턴스 자신을 가리키는 참조변수, 인스턴스의 주소가 저장되어 있다.
>- this(), this(매개변수) : 생성자, 같은 클래스의 다른 생성자를 호출할 때 사용한다.

## 생성자를 이용한 인스턴스의 복사
---
현재 사용하고 있는 인스턴스와 같은 상태를 갖는 인스턴스를 하나 더 만들고자 할 때 생성자를 이용할 수 있다. 두 인스턴스가 같은 상태를 갖는다는 것은 두 인스턴스의 모든 인스턴스 변수(상태)가 동일한 값을 갖고 있다는 것을 뜻한다.

하나의 클래스로부터 생성된 모든 인스턴스의 메서드와 클래스변수는 서로 동일하기 때문에 인스턴스간의 차이는 , 인스턴스마다 각기 다른 값을 가질 수 있는 인스턴스 변수 뿐이다.

```java
Car(Car c) {
  color = c.color;
  gearType = c.gearType;
  door = c.door;
}
```

위의 코드는 Car클래스의 참조변수를 매개변수로 선언한 생성자이다. 매개변수로 넘겨진 참조변수가 가리키는 Car인스턴스의 인스턴스변수인 color, gearType, door의 값을 인스턴스 자신으로 복사하는 것이다.

어떤 인스턴스의 상태를 전혀 알지 못해도 똑같은 상태의 인스턴스를 추가로 생성할 수 있다. Java API의 많은 클래스들이 인스턴스의 복사를 위한 생성자를 정의해놓고 있으니 참고바란다.

__알아두기__  
Object클래스에 정의된 clone메서드를 이용하면 간단히 인스턴스를 복사할 수 있다.

---

읽어주셔서 감사합니다. 😊 

__Reference__  
자바의 정석 - 남궁성  