---
title: "[SQL] 데이터 모델에서의 트랜잭션"
categories:
  - SQL
tags:
  - SQL
  - Transaction
  - 트랜잭션
toc: true
toc_sticky: true
toc_label: "목차"
---

트랜잭션은 크게 업무적으로 발생하는 트랜잭션과 모델에서 발생하는 트랜잭션이 있다. 이번 포스팅에서는 모델에서 발생하는 트랜잭션에 대해 알아보자.

# 트랜잭션이란?
---
모델에서 발생하는 트랜잭션을 알아보기전에 트랜잭션이 무엇인지 간단하게 알고가자.  

트랜잭션은 DB의 논리적 연산단위이며, 하나의 업무 단위로 묶여서 처리되는 것이라고 할 수 있다. 예로 계좌이체가 있는데, 돈을 보내는 사람의 계좌에서 이체금액을 차감하고, 돈을 받는 사람의 계좌에 이체금액을 가산한다. 계좌이체라는 업무는 이러한 2가지  단계로 진행되며, 데이터 정합성을 위해 위 작업이 전부 실행 또는 전부 취소되야 한다.  

<br>

# 모델이 표현하는 트랜잭션
---
트랜잭션은 데이터 모델링을 할 때에도 발생할 수 있다. 지금부터 2가지 예시를 통해 모델이 표현하는 트랜잭션을 살펴볼건데, 한가지 알고 넘어가자. 바커 표기법은 모델간의 관계가 필수적이면 실선으로, 선택적이면 점선과 실선으로 표기한다. 그럼 아래 자료를 보자.

![주문과 주문상세 모델 필수 관계](/blog/assets/img/posts/20220912/required-relationships-between-models.png "주문과 주문상세 모델 필수 관계"){: width="100%"}
<div style="color: gray; text-align: center; margin-bottom: 30px;">주문과 주문상세 모델 필수 관계</div>

고객이 상품을 구매하면서 발생하는 것이 주문이다. 또한 하나의 주문은 여러 개의 상품을 구매할 수 있다. 그렇다면 여기서 우리는 주문과 주문상세의 데이터는 함께 발생되는가, 아니면 독립적으로 발생되는가를 생각해보아야 한다. 일반적인 업무기준으로 보았을 때 주문이 발생하면 주문상세 데이터도 함께 발생된다. 때문에 위 모델처럼 두 엔터티는 필수적 관계여야하며, 이러한 모델은 자연스럽게 트랜잭션이 발생하게된다. 그다음 자료를 보자.

![주문과 주문상세 모델 선택 관계](/blog/assets/img/posts/20220912/selection-relationship-between-models.png "주문과 주문상세 모델 선택 관계"){: width="100%"}
<div style="color: gray; text-align: center; margin-bottom: 30px;">주문과 주문상세 모델 선택 관계</div>

위 모델은 주문과 주문상세 모델의 관계가 선택적임을 표현하고 있다. 일반적인 업무기준으로 생각해보았을 때 이러한 모델은 나올 수 없다.

---

읽어주셔서 감사합니다. 😊 

__Reference__  
SQL 전문가 가이드 - Kdata 한국데이터산업진흥원  